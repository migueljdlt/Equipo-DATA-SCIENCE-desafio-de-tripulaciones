<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/routes/infoRoutes.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/routes/infoRoutes.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Rutas de información
 */

const express = require('express');
const { SCHEMA_DESCRIPCION, TIPOS_PERMITIDOS } = require('../config/constants');
const DB_CONFIG = require('../config/database');
const OLLAMA_CONFIG = require('../config/ollama');

const router = express.Router();

function crearInfoRoutes(mcp) {
    // Health check
    router.get('/health', (req, res) => {
        res.json({ status: 'ok', database: 'Render PostgreSQL' });
    });
    
    // Info principal
    router.get('/', (req, res) => {
        res.json({
            servicio: 'Chatbot SQL + Charts',
            database: 'Render PostgreSQL (database_final_project)',
            modelo: OLLAMA_CONFIG.MODELO,
            graficos: TIPOS_PERMITIDOS,
            formato_grafico: 'base64',
            tablas: DB_CONFIG.TABLES,
            endpoints: [
                'POST /api/query',
                'POST /api/chart',
                'GET /api/chart/types',
                'GET /api/schema',
                'GET /api/tables',
                'GET /api/ejemplos'
            ]
        });
    });
    
    // Schema
    router.get('/schema', (req, res) => {
        res.json({ schema: SCHEMA_DESCRIPCION });
    });
    
    // Tablas
    router.get('/tables', (req, res) => {
        res.json({ tablas: DB_CONFIG.TABLES });
    });
    
    // Ejemplos
    router.get('/ejemplos', (req, res) => {
        res.json({
            ejemplos: [
                'Cuantas ventas hay en total?',
                'Top 5 empleados con mas ventas',
                'Ventas por producto',
                'Ventas por canal de venta',
                'Grafico de barras de ventas por empleado',
                'Grafico de lineas de ventas por mes',
                'Pie chart de ventas por metodo de pago',
                'Top 10 productos mas vendidos',
                'Ventas por region del cliente',
                'Calcula el 5% de las ventas totales',
                'Dame el promedio de ventas',
                'Ventas que superan el promedio',
                'Calcula comision del 3% para cada empleado',
                'Participacion porcentual de cada producto',
                'Top 10% de productos mas vendidos',
            ]
        });
    });

    return router;
}

module.exports = crearInfoRoutes;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#DB_CONFIG">DB_CONFIG</a></li><li><a href="global.html#OLLAMA_CONFIG">OLLAMA_CONFIG</a></li><li><a href="global.html#SCHEMA_DESCRIPCION">SCHEMA_DESCRIPCION</a></li><li><a href="global.html#crearApp">crearApp</a></li><li><a href="global.html#express">express</a></li><li><a href="global.html#https">https</a></li><li><a href="global.html#prepararDatosParaGrafico">prepararDatosParaGrafico</a></li><li><a href="global.html#validarSQL">validarSQL</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Dec 17 2025 11:14:43 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
